"use strict";(self.webpackChunkfoerderfunke_react_app=self.webpackChunkfoerderfunke_react_app||[]).push([[455],{7274:(e,t,a)=>{function i(e,t){var a,i,n;e.accDescr&&(null===(a=t.setAccDescription)||void 0===a||a.call(t,e.accDescr));e.accTitle&&(null===(i=t.setAccTitle)||void 0===i||i.call(t,e.accTitle));e.title&&(null===(n=t.setDiagramTitle)||void 0===n||n.call(t,e.title))}a.d(t,{S:()=>i}),(0,a(32748).K2)(i,"populateCommonDb")},26455:(e,t,a)=>{a.d(t,{diagram:()=>k});var i=a(65099),n=a(7274),l=a(88887),c=a(19263),r=a(32748),o=a(55502),s=a(86287),p=c.UI.pie,d={sections:new Map,showData:!1,config:p},u=d.sections,g=d.showData,f=structuredClone(p),h=(0,r.K2)(()=>structuredClone(f),"getConfig"),m=(0,r.K2)(()=>{u=new Map,g=d.showData,(0,c.IU)()},"clear"),v=(0,r.K2)(e=>{let{label:t,value:a}=e;if(a<0)throw new Error('"'.concat(t,'" has invalid value: ').concat(a,". Negative values are not allowed in pie charts. All slice values must be >= 0."));u.has(t)||(u.set(t,a),r.Rm.debug("added new section: ".concat(t,", with value: ").concat(a)))},"addSection"),w=(0,r.K2)(()=>u,"getSections"),S=(0,r.K2)(e=>{g=e},"setShowData"),x=(0,r.K2)(()=>g,"getShowData"),D={getConfig:h,clear:m,setDiagramTitle:c.ke,getDiagramTitle:c.ab,setAccTitle:c.SV,getAccTitle:c.iN,setAccDescription:c.EI,getAccDescription:c.m7,addSection:v,getSections:w,setShowData:S,getShowData:x},T=(0,r.K2)((e,t)=>{(0,n.S)(e,t),t.setShowData(e.showData),e.sections.map(t.addSection)},"populateDb"),b={parse:(0,r.K2)(async e=>{const t=await(0,o.qg)("pie",e);r.Rm.debug(t),T(t,D)},"parse")},y=(0,r.K2)(e=>"\n  .pieCircle{\n    stroke: ".concat(e.pieStrokeColor,";\n    stroke-width : ").concat(e.pieStrokeWidth,";\n    opacity : ").concat(e.pieOpacity,";\n  }\n  .pieOuterCircle{\n    stroke: ").concat(e.pieOuterStrokeColor,";\n    stroke-width: ").concat(e.pieOuterStrokeWidth,";\n    fill: none;\n  }\n  .pieTitleText {\n    text-anchor: middle;\n    font-size: ").concat(e.pieTitleTextSize,";\n    fill: ").concat(e.pieTitleTextColor,";\n    font-family: ").concat(e.fontFamily,";\n  }\n  .slice {\n    font-family: ").concat(e.fontFamily,";\n    fill: ").concat(e.pieSectionTextColor,";\n    font-size:").concat(e.pieSectionTextSize,";\n    // fill: white;\n  }\n  .legend text {\n    fill: ").concat(e.pieLegendTextColor,";\n    font-family: ").concat(e.fontFamily,";\n    font-size: ").concat(e.pieLegendTextSize,";\n  }\n"),"getStyles"),C=(0,r.K2)(e=>{const t=[...e.values()].reduce((e,t)=>e+t,0),a=[...e.entries()].map(e=>{let[t,a]=e;return{label:t,value:a}}).filter(e=>e.value/t*100>=1).sort((e,t)=>t.value-e.value);return(0,s.rLf)().value(e=>e.value)(a)},"createPieArcs"),k={parser:b,db:D,renderer:{draw:(0,r.K2)((e,t,a,n)=>{r.Rm.debug("rendering pie chart\n"+e);const o=n.db,p=(0,c.D7)(),d=(0,l.$t)(o.getConfig(),p.pie),u=18,g=450,f=g,h=(0,i.D)(t),m=h.append("g");m.attr("transform","translate(225,225)");const{themeVariables:v}=p;let[w]=(0,l.I5)(v.pieOuterStrokeWidth);null!==w&&void 0!==w||(w=2);const S=d.textPosition,x=Math.min(f,g)/2-40,D=(0,s.JLW)().innerRadius(0).outerRadius(x),T=(0,s.JLW)().innerRadius(x*S).outerRadius(x*S);m.append("circle").attr("cx",0).attr("cy",0).attr("r",x+w/2).attr("class","pieOuterCircle");const b=o.getSections(),y=C(b),k=[v.pie1,v.pie2,v.pie3,v.pie4,v.pie5,v.pie6,v.pie7,v.pie8,v.pie9,v.pie10,v.pie11,v.pie12];let A=0;b.forEach(e=>{A+=e});const K=y.filter(e=>"0"!==(e.data.value/A*100).toFixed(0)),R=(0,s.UMr)(k);m.selectAll("mySlices").data(K).enter().append("path").attr("d",D).attr("fill",e=>R(e.data.label)).attr("class","pieCircle"),m.selectAll("mySlices").data(K).enter().append("text").text(e=>(e.data.value/A*100).toFixed(0)+"%").attr("transform",e=>"translate("+T.centroid(e)+")").style("text-anchor","middle").attr("class","slice"),m.append("text").text(o.getDiagramTitle()).attr("x",0).attr("y",-200).attr("class","pieTitleText");const z=[...b.entries()].map(e=>{let[t,a]=e;return{label:t,value:a}}),M=m.selectAll(".legend").data(z).enter().append("g").attr("class","legend").attr("transform",(e,t)=>"translate(216,"+(22*t-22*z.length/2)+")");M.append("rect").attr("width",u).attr("height",u).style("fill",e=>R(e.label)).style("stroke",e=>R(e.label)),M.append("text").attr("x",22).attr("y",14).text(e=>o.getShowData()?"".concat(e.label," [").concat(e.value,"]"):e.label);const O=512+Math.max(...M.selectAll("text").nodes().map(e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.getBoundingClientRect().width)&&void 0!==t?t:0}));h.attr("viewBox","0 0 ".concat(O," ").concat(g)),(0,c.a$)(h,g,O,d.useMaxWidth)},"draw")},styles:y}}}]);
//# sourceMappingURL=455.a914dd4b.chunk.js.map