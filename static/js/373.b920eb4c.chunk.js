"use strict";(self.webpackChunkfoerderfunke_react_app=self.webpackChunkfoerderfunke_react_app||[]).push([[373],{23373:(t,e,a)=>{a.d(e,{diagram:()=>k});var n=a(83770),i=a(1669),c=a(3340),l=a(72409),o=a(55502),r=a(86287),s=l.UI.pie,d={sections:new Map,showData:!1,config:s},p=d.sections,u=d.showData,g=structuredClone(s),f=(0,l.K2)(()=>structuredClone(g),"getConfig"),h=(0,l.K2)(()=>{p=new Map,u=d.showData,(0,l.IU)()},"clear"),m=(0,l.K2)(t=>{let{label:e,value:a}=t;p.has(e)||(p.set(e,a),l.Rm.debug("added new section: ".concat(e,", with value: ").concat(a)))},"addSection"),S=(0,l.K2)(()=>p,"getSections"),x=(0,l.K2)(t=>{u=t},"setShowData"),w=(0,l.K2)(()=>u,"getShowData"),D={getConfig:f,clear:h,setDiagramTitle:l.ke,getDiagramTitle:l.ab,setAccTitle:l.SV,getAccTitle:l.iN,setAccDescription:l.EI,getAccDescription:l.m7,addSection:m,getSections:S,setShowData:x,getShowData:w},T=(0,l.K2)((t,e)=>{(0,n.S)(t,e),e.setShowData(t.showData),t.sections.map(e.addSection)},"populateDb"),v={parse:(0,l.K2)(async t=>{const e=await(0,o.qg)("pie",t);l.Rm.debug(e),T(e,D)},"parse")},y=(0,l.K2)(t=>"\n  .pieCircle{\n    stroke: ".concat(t.pieStrokeColor,";\n    stroke-width : ").concat(t.pieStrokeWidth,";\n    opacity : ").concat(t.pieOpacity,";\n  }\n  .pieOuterCircle{\n    stroke: ").concat(t.pieOuterStrokeColor,";\n    stroke-width: ").concat(t.pieOuterStrokeWidth,";\n    fill: none;\n  }\n  .pieTitleText {\n    text-anchor: middle;\n    font-size: ").concat(t.pieTitleTextSize,";\n    fill: ").concat(t.pieTitleTextColor,";\n    font-family: ").concat(t.fontFamily,";\n  }\n  .slice {\n    font-family: ").concat(t.fontFamily,";\n    fill: ").concat(t.pieSectionTextColor,";\n    font-size:").concat(t.pieSectionTextSize,";\n    // fill: white;\n  }\n  .legend text {\n    fill: ").concat(t.pieLegendTextColor,";\n    font-family: ").concat(t.fontFamily,";\n    font-size: ").concat(t.pieLegendTextSize,";\n  }\n"),"getStyles"),C=(0,l.K2)(t=>{const e=[...t.entries()].map(t=>({label:t[0],value:t[1]})).sort((t,e)=>e.value-t.value);return(0,r.rLf)().value(t=>t.value)(e)},"createPieArcs"),k={parser:v,db:D,renderer:{draw:(0,l.K2)((t,e,a,n)=>{l.Rm.debug("rendering pie chart\n"+t);const o=n.db,s=(0,l.D7)(),d=(0,i.$t)(o.getConfig(),s.pie),p=18,u=450,g=u,f=(0,c.D)(e),h=f.append("g");h.attr("transform","translate(225,225)");const{themeVariables:m}=s;let[S]=(0,i.I5)(m.pieOuterStrokeWidth);null!==S&&void 0!==S||(S=2);const x=d.textPosition,w=Math.min(g,u)/2-40,D=(0,r.JLW)().innerRadius(0).outerRadius(w),T=(0,r.JLW)().innerRadius(w*x).outerRadius(w*x);h.append("circle").attr("cx",0).attr("cy",0).attr("r",w+S/2).attr("class","pieOuterCircle");const v=o.getSections(),y=C(v),k=[m.pie1,m.pie2,m.pie3,m.pie4,m.pie5,m.pie6,m.pie7,m.pie8,m.pie9,m.pie10,m.pie11,m.pie12],b=(0,r.UMr)(k);h.selectAll("mySlices").data(y).enter().append("path").attr("d",D).attr("fill",t=>b(t.data.label)).attr("class","pieCircle");let K=0;v.forEach(t=>{K+=t}),h.selectAll("mySlices").data(y).enter().append("text").text(t=>(t.data.value/K*100).toFixed(0)+"%").attr("transform",t=>"translate("+T.centroid(t)+")").style("text-anchor","middle").attr("class","slice"),h.append("text").text(o.getDiagramTitle()).attr("x",0).attr("y",-200).attr("class","pieTitleText");const A=h.selectAll(".legend").data(b.domain()).enter().append("g").attr("class","legend").attr("transform",(t,e)=>"translate(216,"+(22*e-22*b.domain().length/2)+")");A.append("rect").attr("width",p).attr("height",p).style("fill",b).style("stroke",b),A.data(y).append("text").attr("x",22).attr("y",14).text(t=>{const{label:e,value:a}=t.data;return o.getShowData()?"".concat(e," [").concat(a,"]"):e});const R=512+Math.max(...A.selectAll("text").nodes().map(t=>{var e;return null!==(e=null===t||void 0===t?void 0:t.getBoundingClientRect().width)&&void 0!==e?e:0}));f.attr("viewBox","0 0 ".concat(R," ").concat(u)),(0,l.a$)(f,u,R,d.useMaxWidth)},"draw")},styles:y}},83770:(t,e,a)=>{function n(t,e){var a,n,i;t.accDescr&&(null===(a=e.setAccDescription)||void 0===a||a.call(e,t.accDescr));t.accTitle&&(null===(n=e.setAccTitle)||void 0===n||n.call(e,t.accTitle));t.title&&(null===(i=e.setDiagramTitle)||void 0===i||i.call(e,t.title))}a.d(e,{S:()=>n}),(0,a(72409).K2)(n,"populateCommonDb")}}]);
//# sourceMappingURL=373.b920eb4c.chunk.js.map